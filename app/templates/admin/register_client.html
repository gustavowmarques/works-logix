{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Register New Client</h2>
    <form method="POST">
        <div class="mb-3">
            <label for="name" class="form-label">Client Name</label>
            <input type="text" class="form-control" id="name" name="name" required>
        </div>

        <!-- Structured Address Fields -->
        <div class="mb-3">
            <label>Eircode</label>
            <input class="form-control" id="eircode" name="eircode" onblur="fetchAddressFromEircode(this.value)" required>
          </div>
        
          <div class="mb-3">
            <label>Street Address (Line 1)</label>
            <input class="form-control" id="street" name="street" required>
          </div>
        
          <div class="mb-3">
            <label>City / Town</label>
            <input class="form-control" id="city" name="city" required>
          </div>
        
          <div class="mb-3">
            <label>County</label>
            <input class="form-control" id="county" name="county" required>
        </div>

        <div class="mb-3">
            <label>Country</label>
            <input class="form-control" id="country" name="country" value="Ireland" required>
        </div>
        
        <div class="mb-3">
            <label for="registration_number" class="form-label">Company Registration Number</label>
            <input type="text" class="form-control" id="registration_number" name="registration_number">
        </div>
        
        <div class="mb-3">
            <label for="year_of_construction" class="form-label">Year of Construction</label>
            <input type="number" class="form-control" id="year_of_construction" name="year_of_construction">
        </div>
        
        <div class="mb-3">
            <label for="number_of_units" class="form-label">Number of Units</label>
            <input type="number" class="form-control" id="number_of_units" name="number_of_units">
        </div>
        
        <!-- Assigned Property Manager -->
        <div class="mb-3">
            <label for="property_manager_id" class="form-label">Assign Property Manager</label>
            <select class="form-select" name="property_manager_id" id="property_manager_id">
                <option value="">-- Select Property Manager --</option>
                {% for pm in property_managers %}
                    <option value="{{ pm.id }}">{{ pm.full_name }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-success">Register Client</button>
    </form>
</div>
{% endblock %}
